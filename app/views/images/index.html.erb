<h3>Search</h3>

<%= form_tag images_path, :method => 'get' do %>
   <text>Object:</text>
   <%= select_tag :search_btype, options_for_select([["Select body type", ""],
                                                "Comet",
                                                "Meteor",
                                                "Not Defined",
                                                "Galaxy",
                                                "Satellite",
                                                "Star"], 
                                                params[:search_btype]) %><br />

   <text>Date:</text>
   <%= date_field_tag :search_date, params[:search_date],
                     "data-provide" => 'datepicker' %><br />
   <%= submit_tag "Search" %>
<% end %>

<br />
<div align = "center">
<h3>Gallery</h3>
<div id = "grid">
   <% @Images.each do |t| %>
      <div class = "grid-element" >
         <% if t.attachment.file.identifier == "no_image" ||  t.attachment.file.identifier == nil %>
            <%= link_to image_tag("/uploads/image/img-not-found-200x180"), 
                                         image_show_path(t) %>
         <% else %>
            <%= link_to image_tag(t.attachment_url(:thumb)), image_show_path(t) %>
            <!--<td><%= link_to image_tag(t.attachment_url(:thumb)), t.attachment_url %>-->
         <% end %>
      </div>
   <% end %>
</div>

<div class = "clear"></div>


<!--
<table class = "table table-bordered table-striped">
   <thead>
      <tr>
         <th>Body Type</th>
         <th>Image</th>
         <th> </th>
      </tr>
   </thead>
   
   <tbody>
      <% @Images.each do |t| %>
         
         <tr>
            <td><%= t.body_type %></td>

            <% if t.attachment.file.identifier == "no_image" ||  t.attachment.file.identifier == nil %>
               <td><%= link_to image_tag("/uploads/image/img-not-found-200x180"), 
                                         image_show_path(t) %></td>
            <% else %>
               <td><%= link_to image_tag(t.attachment_url(:thumb)), image_show_path(t) %>
               <!--<td><%= link_to image_tag(t.attachment_url(:thumb)), t.attachment_url %></td>
            <% end %>

            <td><%= button_to "Delete", t, method: :delete, class: "btn btn-danger", confirm: "Are you sure that you wish to delete the image?" %></td>
         </tr>
         <% end %>
   </tbody>
</table>
-->

<% if params.has_key?(:id) %>
   <% page = params[:id] %>
<% else %>
   <% page = "1" %>
<% end %>

<% max_pages = (@Images.count.to_f/9).ceil %>

<nav>
   <ul class = "pagination">

   <!-- Previous page -->
   <% if page == "1" %>
      <li class = "page-item disabled">
      <% previous_page = 1 %>
   <% else %>
      <li class = "page-item">
      <% previous_page = page.to_i - 1 %>
   <% end %>
      <a class = "page-link" href = <%= image_gallery_path(previous_page) %>
          aria-label "Previous">
         <span aria-hidden = "true">&laquo;</span>
         <span class = "sr-only">Previous</span>
      </a>
   </li>

   <!-- Show current page -->
   <li class = "page-item active"><%= link_to(page, image_gallery_path(page.to_i), class: "page-link") %></li>

   <!-- Next page -->
   <% if page == max_pages.to_s %>
      <li class = "page-item disabled">
      <% next_page = max_pages %>
   <% else %>
      <li class = "page-item">
      <% next_page = page.to_i + 1 %>
   <% end %>
      <a class = "page-link" href = <%= image_gallery_path(next_page) %>
          aria-label "Next">
         <span aria-hidden = "true">&raquo;</span>
         <span class = "sr-only">Next</span>
      </a>
   </li>
   </ul>
</nav>
</div>